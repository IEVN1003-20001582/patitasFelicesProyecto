<div class="space-y-6">
  
  <div class="flex flex-col md:flex-row justify-between items-end gap-4 border-b border-gray-200 pb-4">
    <div>
      <h2 class="text-2xl font-bold text-gray-800">Consulta de Inventario</h2>
      <p class="text-gray-500 text-sm">Verifica la disponibilidad de insumos médicos.</p>
    </div>
    
    <div *ngIf="productosAtencion > 0" class="bg-red-50 text-red-700 px-4 py-2 rounded-lg border border-red-100 flex items-center gap-2 text-sm animate-pulse">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd" /></svg>
      Hay <strong>{{ productosAtencion }} productos</strong> con stock bajo o agotado.
    </div>
  </div>

  <div class="bg-white p-4 rounded-xl shadow-sm border border-gray-100">
    <div class="relative w-full md:w-96">
      <span class="absolute inset-y-0 left-0 flex items-center pl-3 text-gray-400">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z" clip-rule="evenodd" /></svg>
      </span>
      <input 
        type="text" 
        [(ngModel)]="searchTerm"
        placeholder="Buscar medicamento o insumo..." 
        class="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500 outline-none">
    </div>
  </div>

  <div class="bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden">
    <div class="overflow-x-auto">
      <table class="w-full text-left text-sm text-gray-600">
        <thead class="bg-gray-50 text-xs uppercase font-semibold text-gray-500">
          <tr>
            <th class="p-4">Producto</th>
            <th class="p-4">Categoría</th>
            <th class="p-4 text-center">Disponibilidad</th>
            <th class="p-4 text-center">Estado</th>
            <th class="p-4 text-center">Acción</th>
          </tr>
        </thead>
        <tbody class="divide-y divide-gray-100">
          <tr *ngFor="let producto of productos" class="hover:bg-gray-50 transition">
            
            <td class="p-4 font-medium text-gray-800">{{ producto.nombre }}</td>
            <td class="p-4">{{ producto.categoria }}</td>
            
            <td class="p-4 text-center font-bold text-gray-700">
              {{ producto.stock }} unidades
            </td>

            <td class="p-4 text-center">
              <span [class]="'px-3 py-1 rounded-full text-xs font-semibold border ' + getEstadoColor(producto)">
                {{ getEstadoTexto(producto) }}
              </span>
            </td>

            <td class="p-4 text-center">
              <button 
                *ngIf="producto.stock <= producto.minimo"
                (click)="solicitarStock(producto)"
                class="bg-orange-100 text-orange-700 hover:bg-orange-200 px-4 py-1 rounded-lg text-xs font-semibold transition border border-orange-200 flex items-center justify-center gap-1 mx-auto">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9" /></svg>
                Solicitar
              </button>
              
              <span *ngIf="producto.stock > producto.minimo" class="text-xs text-gray-400 italic">
                Suficiente
              </span>
            </td>

          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>